<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" crossorigin="anonymous">
</head>

<body>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-kenU1KFdBIe4zVF0s0G1M5b4hcpxyD9F7jL+jjXkk+Q2h455rYXK/7HAuoJl+0I4"
    crossorigin="anonymous"></script>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.9.1/font/bootstrap-icons.css">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <div class="container-xxl">
    <button id="abrirModalCadastrarSol" type="button" class="btn btn-light"
      style="background-color: #edb926;color: white;">Cadastrar nova solicitação</button>
  </div>

  <div class="container-fluid">
    <div id="modalCadastrarSol" class="modal" tabindex="-1">
      <div class="modal-dialog modal-fullscreen">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title">Cadastrar Nova Autorização</h5>
            <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
          </div>
          <div class="modal-body">
            <form id="formSol">
              <div class="mb-3">
                <label for="cliente" class="form-label">Cliente</label>
                <input class="form-control" id="cliente" aria-describedby="clienteHelp" required>
                <div id="clienteHelp" class="form-text">Informe o Cliente</div>
              </div>
              <div class="mb-3">
                <label for="cpfMotorista" class="form-label">CPF Motorista</label>
                <input class="form-control" id="cpfMotorista" aria-describedby="cpfHelp" required>
                <div id="cpfHelp" class="form-text">Informe o CPF do motorista</div>
              </div>
              <div class="mb-3">
                <label for="placaDoVeiculo" class="form-label">Placa do Veículo</label>
                <input class="form-control" id="placaDoVeiculo" aria-describedby="placaVeic" required>
                <div id="placaVeic" class="form-text">Informe a placa do veículo</div>
              </div>
              <div class="mb-3">
                <label for="cpfCnpjTransportadora" class="form-label">CPF/CNPJ Transportadora</label>
                <input class="form-control" id="cpfCnpjTransportadora" aria-describedby="cpfTransp" required>
                <div id="cpfTransp" class="form-text">Informe cpf ou cnpj da transportadora</div>
              </div>
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Fechar</button>
            <button id="enviaSol" type="submit" class="btn btn-primary">Enviar Autorização</button>
          </div>
          </form>
        </div>
      </div>
    </div>

    <br>

    <table class="table table-bordered border border-warning">
      <thead>
        <tr>
          <th scope="col">N° Autorização</th>
          <th scope="col">Situação</th>
          <th scope="col">Cliente</th>
          <th scope="col">Placa do Veículo</th>
          <th scope="col" colspan="2">CPF/CNPJ da transportadora</th>
        </tr>
      </thead>
      <tbody id="tbodyAutorizacao">
      </tbody>
    </table>
  </div>

</body>





</html>

<script>

  var linhaAut = "";

  console.log("commit 54");

  var json = [{ "id": 1, "numeroAut": "123456", "cliente": "02 - ABCDEF", "motorista": "106.288.222-23", "veiculo": "ABC-1234", "transportadora": "42.077.441/0001-31", "situacao": "Aguardando Aprovação" }, { "id": 2, "numeroAut": "7891011", "cliente": "01 - GHIJK", "motorista": "106.222.111-22", "veiculo": "DEF-5678", "transportadora": "43.315.180/0001-03", "situacao": "Aprovado" }, { "id": 3, "numeroAut": "121314", "cliente": "03 - LMNOPQ", "motorista": "106.111.222-11", "veiculo": "GHI-1011", "transportadora": "87.065.637/0001-44", "situacao": "Rejeitado" }, { "id": 4, "numeroAut": "151617", "cliente": "05 - RSTUVW", "motorista": "111.444.555-43", "veiculo": "JKL-1213", "transportadora": "78.852.365/0001-31", "situacao": "Cancelado" }];

  $("#abrirModalCadastrarSol").click(function () {
    $("#modalCadastrarSol").modal('show');
  });

  $("#enviaSol").click(function () {
    var formulario = document.getElementById("formSol");
    if (!formulario.checkValidity()) {
    }
    else {
      formulario.addEventListener('submit', function (e) {
        e.preventDefault();
      });
      console.log("passou");
      $("#modalCadastrarSol").modal('hide');
    }
  });

  window.addEventListener("load", function populaValorTabelaAutorizacao() {

    console.log("json", json);

    json.map(({ id, numeroAut, cliente, motorista, veiculo, transportadora, situacao }) => {

      console.log(numeroAut);

      linhaAut += `<tr id="linha${id}">
                      <th>${numeroAut}</th>
                      <td>${situacao}</td>
                      <td>${cliente}</td>
                      <td>${veiculo}</td>
                      <td>${transportadora}</td>
                      <td style="display: flex;justify-content: space-between;">
                      <span><i class="bi bi-pencil-square"></i></span>
                      <span><i class="bi bi-check-lg"></i></span>
                      <span><i class="bi bi-x-lg"></i></span>
                      </td>
                    </tr>`;
    });

    document.getElementById("tbodyAutorizacao").innerHTML = linhaAut;
  }, false);


</script>